<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebSockets</title>
</head>
<body>

  <script>
    if('WebSocket' in window || 'MozWebSocket' in window){
      var socket = new WebSocket('ws://echo.WebSocket.org');
      if(socket.readyState == 0){
        console.log('Connecting...');
      }

      socket.onopen = function(){
        if(socket.readyState ==1){
          console.log('Connection Opened');
          socket.send('Hey, send back whatever I throw at you!');
        }
      };

      socket.onmessage = function(e){
        console.log('Socket server said: ' + e.data);
      };

      socket.onclose = function(){
        if(socket.readyState == 2){
          console.log('Connection Closed')
        }
      };

      socket.onerror = function(err){
        console.log('An Error Occurred ' + err);
      };

    } else {
      console.log('Sadly no WebSockets');
    }
  </script>
</body>
</html>
